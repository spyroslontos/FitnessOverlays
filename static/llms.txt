# FitnessOverlays

> Web app that creates Instagram-ready overlays from Strava workout data with transparent backgrounds.

## Summary

FitnessOverlays generates clean, customizable activity overlays from Strava data, designed for social sharing. It solves the problem of Strava's limited sharing options by letting athletes create premium-quality, transparent PNG overlays without a subscription.

## Key Features

- **Secure Integration**: OAuth 2.0 connection to Strava (read-only access).
- **Canvas Rendering**: Client-side, deterministic rendering for high-quality overlays.
- **Route Mapping**: Visualizes activity routes directly from Strava data.
- **Social Optimized**: Exports transparent PNGs perfect for Instagram Stories, Reels, and TikTok.
- **Privacy Focused**: No data sold; minimal data retention policy.

## Tech Stack

### Core
- **Backend**: Python 3.14+ with FastAPI and Uvicorn.
- **Database**: PostgreSQL (Supabase) with SQLAlchemy 2.0 (Async) and Asyncpg.
- **Caching**: Redis for session storage and rate limiting.
- **Frontend**: Vanilla JavaScript, Tailwind CSS, Flowbite.

### Infrastructure
- **Containerization**: Docker (multi-stage build).
- **Hosting**: Render (Web Service).
- **Proxy**: Cloudflare (custom IP detection logic implemented).

## API Documentation

### Endpoints
- `GET /`: Homepage
- `GET /demo`: Interactive demo with sample data (no login required)
- `GET /login`: Initiate Strava OAuth flow
- `GET /callback`: OAuth callback handler
- `GET /activities`: View authenticated user's recent activities
- `GET /customize`: Customization interface for selected activity
- `GET /api/activities/sync`: JSON endpoint to sync data from Strava (CSRF protected)
- `POST /logout`: Terminate user session

## Development Setup

```bash
# Clone and setup
git clone https://github.com/spyroslontos/FitnessOverlays.git
cd FitnessOverlays
python -m venv .fitnessoverlays-venv
source .fitnessoverlays-venv/bin/activate
pip install -r requirements.txt

# Environment variables
cp .env.example .env
# Configure CLIENT_ID, CLIENT_SECRET, etc.

# Run local server
uvicorn server:app --reload
```

## Security

- **Authentication**: Secure cookie-based sessions (Redis-backed in production).
- **Rate Limiting**: IP-based limiting using `slowapi` and real IP extraction.
- **CSRF Protection**: Enforced on state-changing requests (including sensitive GETs).
- **Headers**: Full security headers (HSTS, CSP, X-Content-Type-Options).